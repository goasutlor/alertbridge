version: 1
defaults:
  target_timeout_connect_sec: 2
  target_timeout_read_sec: 5
routes:
- name: ocp-alertmanager
  match:
    source: ocp
  unroll_alerts: true
  target:
    url_env: TARGET_URL_OCP
    url: http://localhost:8082/webhook/ocp
    auth_header_env: TARGET_AUTH_OCP
    api_key_header: X-API-Key
    api_key_env: null
    api_key: alarm_08fb8ce21b722cf99f0eb699281e5465
  transform:
    include_fields:
    - alerts
    - alerts.0
    - alerts.0.status
    - commonAnnotations
    - commonAnnotations.summary
    - groupLabels
    - groupLabels.alertname
    drop_fields: null
    rename:
      groupLabels.alertname: title
      commonAnnotations.summary: message
      alerts.0.status: timestamp
    enrich_static: null
    map_values: null
    output_template:
      type: flat
      fields:
        title: $.title
        message: $.message
        timestamp: $.timestamp
  verify_hmac: null
- name: confluent-alerts
  match:
    source: confluent
  target:
    url_env: TARGET_URL_CONFLUENT
    url: http://127.0.0.1:9999/webhook
    auth_header_env: null
    api_key_header: null
    api_key_env: null
    api_key: null
  transform:
    include_fields:
    - alertId
    - description
    - severity
    drop_fields: null
    rename: null
    enrich_static: null
    map_values: null
    output_template:
      type: flat
      fields:
        alert_id: $.alertId
        message: $.description
        severity: $.severity
  verify_hmac: null
auth:
  basic: null
  api_keys:
    keys:
    - name: ocp-test
      key: c81ca9d3be38258dd5b0a064d7c217cf77176b637d6a0e65a4854384661c0ebb
      created_at: '2026-02-07T04:25:33.647'
    required: true
